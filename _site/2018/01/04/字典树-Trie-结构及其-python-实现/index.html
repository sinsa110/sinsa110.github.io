<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>字典树 Trie 结构介绍及其 python 实现 - SYP's Blog</title>

	<link rel="shortcut icon" href="/styles/images/favicon.jpg">
	<link rel="icon" href="/styles/images/favicon.jpg">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="canonical" href="/2018/01/04/%E5%AD%97%E5%85%B8%E6%A0%91-Trie-%E7%BB%93%E6%9E%84%E5%8F%8A%E5%85%B6-python-%E5%AE%9E%E7%8E%B0/">
	<link rel="alternate" type="application/rss+xml" title="SYP's Blog" href="/feed.xml">
	
	<meta name="keywords" content="字典树 Trie 结构介绍及其 python 实现, SYP's Blog, 个人博客;大数据;nlp;数据分析;数据挖掘;心怀感恩;奋斗不止;Stay hungry;Stay foolish">
	<meta name="description" content="个人博客;大数据;nlp;数据分析;数据挖掘;心怀感恩;奋斗不止;Stay hungry;Stay foolish">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">
        <img src="/styles/images/logo.jpg">
      </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">主页</a>
        </li>
        <li>
          <a href="/categories/">分类</a>
        </li>
        <li>
          <a href="/tag">标签</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
            <a><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li>
        <li>
          <a href="/donate/"><strong>打赏</strong></a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" href="/about_me">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/sinsa110/sinsa110.github.io">本项目</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>
    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>字典树 Trie 结构介绍及其 python 实现</h1>
		    <p>Post on Jan 04, 2018 by <a href="/about">Sinsa SI</a></p>
		-->
		    <h3>If you find a path with no obstacles, it probably doesn’t lead anywhere.</h3>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#python-ref">python</a>	/
    	<a href="/tag/#Trie 树-ref">Trie 树</a>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
  </ul>
  <div style="height: 200px;width: 200px;">
    <script type="text/javascript" src="//ra.revolvermaps.com/0/0/2.js?i=0w0975ogtf2&amp;m=8&amp;s=130&amp;c=54ff00&amp;t=1" async="async"></script>
  </div>
</div>

 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">字典树 Trie 结构介绍及其 python 实现</h1>
              <!--
                <p class="post-meta">Jan 4, 2018</p>
              -->
              <div class="meta">Posted on <span class="postdate">Jan 04, 2018</span> By <a target="_blank" href="http://localhost:4000">Sinsa SI</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#concept" id="markdown-toc-concept">概念</a></li>
  <li><a href="#xz" id="markdown-toc-xz">性质</a></li>
  <li><a href="#sx" id="markdown-toc-sx">基本思想</a>    <ul>
      <li><a href="#cr" id="markdown-toc-cr">1、插入过程</a></li>
      <li><a href="#find" id="markdown-toc-find">2、查询过程</a></li>
    </ul>
  </li>
  <li><a href="#yy" id="markdown-toc-yy">应用</a></li>
  <li><a href="#yqd" id="markdown-toc-yqd">优缺点</a></li>
  <li><a href="#sx" id="markdown-toc-sx">实现</a>    <ul>
      <li><a href="#python" id="markdown-toc-python">python 版</a></li>
    </ul>
  </li>
</ul>

<h1 id="concept">概念</h1>
<p>Trie，又称前缀树或字典树，是一种有序树状的数据结构，用于保存关联数组，其中的键通常是字符串。</p>

<h1 id="xz">性质</h1>
<ol>
  <li>根节点不包含字符，除根节点外的每个节点只包含一个字符。</li>
  <li>从根节点到某一个节点，路径上经过的字符连接起来，为该节点对应的字符串。</li>
  <li>每个节点的所有子节点包含的字符串不相同。</li>
  <li>每个节点的所有子孙都有相同的前缀，也就是这个节点对应的字符串。</li>
</ol>

<h1 id="sx">基本思想</h1>

<h2 id="cr">1、插入过程</h2>
<p>这里以字母树为例，对于一个单词，从根开始，沿着单词的各个字母所对应的树中的节点分支向下走，直到单词遍历完，将最后的节点标记为红色，表示该单词已插入Trie树。</p>

<h2 id="find">2、查询过程</h2>

<p>同样的，从根开始按照单词的字母顺序向下遍历trie树，一旦发现某个节点标记不存在或者单词遍历完成而最后的节点未标记为红色，则表示该单词不存在，若最后的节点标记为红色，表示该单词存在。</p>

<h1 id="yy">应用</h1>
<ol>
  <li>关键词检索</li>
  <li>词频统计</li>
  <li>搜索提示</li>
  <li>作为辅助结构</li>
  <li>… …</li>
</ol>

<h1 id="yqd">优缺点</h1>
<p>优点：时间复杂度小。它的插入和查询时间复杂度都为 O(k) ，其中 k 为 key 的长度，与 Trie 中保存了多少个元素无关。</p>

<p>缺点：空间消耗很高。</p>

<h1 id="sx">实现</h1>

<h2 id="python">python 版</h2>

<p>用嵌套字典来实现树结构</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># !/usr/bin/env python</span>
<span class="c"># -*- coding:utf-8 -*-</span>
<span class="c"># create on 18/1/4</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s">'yipu.si'</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">info</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">warn</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">'</span><span class="si">%(asctime)</span><span class="s">s - PID:</span><span class="si">%(process)</span><span class="s">d - </span><span class="si">%(levelname)</span><span class="s">s: </span><span class="si">%(message)</span><span class="s">s'</span><span class="p">)</span>

<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Trie</span><span class="p">:</span>
    <span class="n">root</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">END</span> <span class="o">=</span> <span class="s">'/'</span>
    <span class="n">info</span><span class="p">(</span><span class="s">"define Trie"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">END</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">add_word_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
        <span class="n">info</span><span class="p">(</span><span class="s">"add words"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="n">info</span><span class="p">(</span><span class="s">"added successfully"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">END</span> <span class="ow">in</span> <span class="n">node</span>

    <span class="k">def</span> <span class="nf">VPrint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">word</span> <span class="o">=</span> <span class="s">u"""一举,一举一动,一举成名,一举成名天下知,万能,万能胶"""</span>
    <span class="n">li</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">","</span><span class="p">)</span>
    <span class="n">trie</span> <span class="o">=</span> <span class="n">Trie</span><span class="p">()</span>
    <span class="n">trie</span><span class="o">.</span><span class="n">add_word_list</span><span class="p">(</span><span class="n">li</span><span class="p">)</span>
    <span class="n">trie</span><span class="o">.</span><span class="n">VPrint</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">trie</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">u"一举一动"</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">trie</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">"sinsaSi"</span><span class="p">)</span>



</code></pre></div></div>


            </article>
        </div>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2014-2018 <a href=""><code>Sinsa SI</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, themed from <a href="http://lesscss.cn/">Less</a>.</p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  </body>
</html>
